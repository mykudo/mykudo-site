/* ============================================
   MYKUDO - Internationalization System
   FR / EN Language Toggle
   ============================================ */

const translations = {
    fr: {
        // Navigation
        "nav.home": "Accueil",
        "nav.services": "Services",
        "nav.expertise": "Expertise",
        "nav.references": "Références",
        "nav.about": "À propos",
        "nav.contact": "Contact",
        "nav.cta": "Démarrer un projet",

        // Hero
        "hero.badge": "Expert Microsoft Azure",
        "hero.title1": "Architecturez",
        "hero.title2": "l'excellence",
        "hero.title3": "Cloud & Data",
        "hero.description": "Cabinet de conseil premium spécialisé en <strong>Architecture Cloud Azure</strong>, <strong>Data Engineering</strong> et <strong>DevOps</strong>. Nous transformons vos défis technologiques en avantages compétitifs.",
        "hero.cta1": "Discutons de votre projet",
        "hero.cta2": "Découvrir nos services",
        "hero.stat1": "Années d'expertise",
        "hero.stat2": "Projets délivrés",
        "hero.stat3": "Clients satisfaits",
        "hero.scroll": "Scroll",

        // Services
        "services.badge": "Ce que nous faisons",
        "services.title": "Des services d'excellence pour votre transformation",
        "services.subtitle": "Une expertise pointue au service de vos ambitions technologiques",
        "services.featured": "Populaire",
        "services.cta": "En savoir plus",

        "services.cloud.title": "Architecture Cloud",
        "services.cloud.desc": "Conception et mise en œuvre d'architectures cloud-native scalables, résilientes et sécurisées sur Microsoft Azure.",

        "services.data.title": "Data Engineering & IA",
        "services.data.desc": "Plateformes data modernes avec Databricks, pipelines ETL/ELT performants et intégration de solutions d'IA générative.",

        "services.devops.title": "DevOps & Platform",
        "services.devops.desc": "Automatisation CI/CD, GitOps, observabilité avancée et optimisation FinOps pour des déploiements fiables et économiques.",

        // Expertise
        "expertise.badge": "Notre stack",
        "expertise.title": "Technologies maîtrisées",
        "expertise.subtitle": "Une expertise technique approfondie sur les technologies leaders du marché",

        // References
        "references.badge": "Ils nous font confiance",
        "references.title": "Références clients",
        "references.subtitle": "Des projets stratégiques pour des entreprises de premier plan",
        "references.testimonial": "\"Une expertise technique rare combinée à une vraie compréhension des enjeux métier. MYKUDO a su transformer notre vision en une architecture cloud robuste et évolutive.\"",

        // About
        "about.badge": "Qui sommes-nous",
        "about.title": "L'expertise au service de votre réussite",
        "about.text1": "<strong>MYKUDO</strong> est un cabinet de conseil fondé par <strong>Djilali SAHRAOUI</strong>, Solution Architect et Data Architect avec plus de 13 ans d'expérience sur des projets stratégiques pour des grands comptes.",
        "about.text2": "Notre mission : vous accompagner dans votre transformation digitale avec une approche pragmatique, orientée résultats et adaptée à vos enjeux métier.",
        "about.value1.title": "Excellence",
        "about.value1.desc": "Standards techniques élevés et bonnes pratiques",
        "about.value2.title": "Engagement",
        "about.value2.desc": "Implication totale dans la réussite de vos projets",
        "about.value3.title": "Innovation",
        "about.value3.desc": "Veille continue et adoption des meilleures technologies",
        "about.cta": "Voir le profil du fondateur",

        // CTA
        "cta.title": "Prêt à transformer votre SI ?",
        "cta.subtitle": "Discutons de vos enjeux et construisons ensemble votre roadmap technologique.",
        "cta.button": "Planifier un échange",

        // Contact
        "contact.badge": "Contact",
        "contact.title": "Démarrons votre projet",
        "contact.subtitle": "Une question ? Un projet ? N'hésitez pas à nous contacter.",
        "contact.phone": "Téléphone",
        "contact.location": "Localisation",
        "contact.form.name": "Nom complet",
        "contact.form.company": "Entreprise",
        "contact.form.subject": "Sujet",
        "contact.form.select": "Sélectionnez un sujet",
        "contact.form.opt1": "Architecture Cloud",
        "contact.form.opt2": "Data Engineering & IA",
        "contact.form.opt3": "DevOps & Platform",
        "contact.form.opt4": "Audit & Conseil",
        "contact.form.opt5": "Autre",
        "contact.form.send": "Envoyer le message",

        // Footer
        "footer.tagline": "Expert Cloud, Data & Architecture Azure",
        "footer.services": "Services",
        "footer.company": "Entreprise",
        "footer.rights": "Tous droits réservés."
    },

    en: {
        // Navigation
        "nav.home": "Home",
        "nav.services": "Services",
        "nav.expertise": "Expertise",
        "nav.references": "References",
        "nav.about": "About",
        "nav.contact": "Contact",
        "nav.cta": "Start a project",

        // Hero
        "hero.badge": "Microsoft Azure Expert",
        "hero.title1": "Architect",
        "hero.title2": "excellence",
        "hero.title3": "in Cloud & Data",
        "hero.description": "Premium consulting firm specialized in <strong>Azure Cloud Architecture</strong>, <strong>Data Engineering</strong> and <strong>DevOps</strong>. We transform your technological challenges into competitive advantages.",
        "hero.cta1": "Let's discuss your project",
        "hero.cta2": "Discover our services",
        "hero.stat1": "Years of expertise",
        "hero.stat2": "Projects delivered",
        "hero.stat3": "Satisfied clients",
        "hero.scroll": "Scroll",

        // Services
        "services.badge": "What we do",
        "services.title": "Excellence services for your transformation",
        "services.subtitle": "Sharp expertise at the service of your technological ambitions",
        "services.featured": "Popular",
        "services.cta": "Learn more",

        "services.cloud.title": "Cloud Architecture",
        "services.cloud.desc": "Design and implementation of scalable, resilient and secure cloud-native architectures on Microsoft Azure.",

        "services.data.title": "Data Engineering & AI",
        "services.data.desc": "Modern data platforms with Databricks, high-performance ETL/ELT pipelines and generative AI solutions integration.",

        "services.devops.title": "DevOps & Platform",
        "services.devops.desc": "CI/CD automation, GitOps, advanced observability and FinOps optimization for reliable and cost-effective deployments.",

        // Expertise
        "expertise.badge": "Our stack",
        "expertise.title": "Technologies mastered",
        "expertise.subtitle": "Deep technical expertise on market-leading technologies",

        // References
        "references.badge": "They trust us",
        "references.title": "Client references",
        "references.subtitle": "Strategic projects for leading companies",
        "references.testimonial": "\"A rare technical expertise combined with a true understanding of business challenges. MYKUDO successfully transformed our vision into a robust and scalable cloud architecture.\"",

        // About
        "about.badge": "Who we are",
        "about.title": "Expertise at the service of your success",
        "about.text1": "<strong>MYKUDO</strong> is a consulting firm founded by <strong>Djilali SAHRAOUI</strong>, Solution Architect and Data Architect with over 13 years of experience on strategic projects for large companies.",
        "about.text2": "Our mission: to support you in your digital transformation with a pragmatic, results-oriented approach adapted to your business challenges.",
        "about.value1.title": "Excellence",
        "about.value1.desc": "High technical standards and best practices",
        "about.value2.title": "Commitment",
        "about.value2.desc": "Total involvement in the success of your projects",
        "about.value3.title": "Innovation",
        "about.value3.desc": "Continuous monitoring and adoption of the best technologies",
        "about.cta": "View founder's profile",

        // CTA
        "cta.title": "Ready to transform your IT?",
        "cta.subtitle": "Let's discuss your challenges and build your technology roadmap together.",
        "cta.button": "Schedule a call",

        // Contact
        "contact.badge": "Contact",
        "contact.title": "Let's start your project",
        "contact.subtitle": "A question? A project? Feel free to contact us.",
        "contact.phone": "Phone",
        "contact.location": "Location",
        "contact.form.name": "Full name",
        "contact.form.company": "Company",
        "contact.form.subject": "Subject",
        "contact.form.select": "Select a subject",
        "contact.form.opt1": "Cloud Architecture",
        "contact.form.opt2": "Data Engineering & AI",
        "contact.form.opt3": "DevOps & Platform",
        "contact.form.opt4": "Audit & Consulting",
        "contact.form.opt5": "Other",
        "contact.form.send": "Send message",

        // Footer
        "footer.tagline": "Cloud, Data & Azure Architecture Expert",
        "footer.services": "Services",
        "footer.company": "Company",
        "footer.rights": "All rights reserved."
    }
};

// i18n Class
class I18n {
    constructor() {
        // Check localStorage first, then detect browser language
        const savedLang = localStorage.getItem('mykudo-lang');
        if (savedLang) {
            this.currentLang = savedLang;
        } else {
            // Detect browser language (e.g., 'fr-FR' -> 'fr', 'en-US' -> 'en')
            const browserLang = navigator.language || navigator.userLanguage || 'en';
            const langCode = browserLang.split('-')[0].toLowerCase();
            // Only use 'fr' if browser is French, otherwise default to 'en'
            this.currentLang = langCode === 'fr' ? 'fr' : 'en';
        }
        this.init();
    }

    init() {
        this.updateLanguage(this.currentLang);
        this.setupToggle();
    }

    setupToggle() {
        const langToggle = document.getElementById('lang-toggle');
        if (!langToggle) return;

        const buttons = langToggle.querySelectorAll('.lang-btn');
        buttons.forEach(btn => {
            if (btn.dataset.lang === this.currentLang) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }

            btn.addEventListener('click', () => {
                const lang = btn.dataset.lang;
                this.updateLanguage(lang);
                buttons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            });
        });
    }

    updateLanguage(lang) {
        this.currentLang = lang;
        localStorage.setItem('mykudo-lang', lang);
        document.documentElement.lang = lang;

        // Update all elements with data-i18n attribute
        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.getAttribute('data-i18n');
            const translation = this.getTranslation(key);
            if (translation) {
                element.innerHTML = translation;
            }
        });

        // Update page title
        const titles = {
            fr: 'MYKUDO - Expert Cloud, Data & Architecture Azure',
            en: 'MYKUDO - Cloud, Data & Azure Architecture Expert'
        };
        document.title = titles[lang];

        // Update meta description
        const descriptions = {
            fr: "MYKUDO - Cabinet de conseil expert en Architecture Cloud Azure, Data Engineering et DevOps. Transformez votre SI avec +13 ans d'expertise.",
            en: "MYKUDO - Expert consulting firm in Azure Cloud Architecture, Data Engineering and DevOps. Transform your IT with +13 years of expertise."
        };
        const metaDesc = document.querySelector('meta[name="description"]');
        if (metaDesc) {
            metaDesc.setAttribute('content', descriptions[lang]);
        }
    }

    getTranslation(key) {
        return translations[this.currentLang]?.[key] || translations['fr'][key] || key;
    }
}

// Initialize i18n on DOM ready
document.addEventListener('DOMContentLoaded', () => {
    window.i18n = new I18n();
});
